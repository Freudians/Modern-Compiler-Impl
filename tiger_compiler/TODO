write tests for the parser/abstract syntax tree construction
refactor the existing type-checker code