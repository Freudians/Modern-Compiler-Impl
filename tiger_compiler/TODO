re-write all operations on types to account for NAME (fuck you appel)
add accurate positions